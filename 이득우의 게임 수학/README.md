# 이득우의 게임 수학
## 1부 가상 세계의 구축
### 2장 수: 가상 세계를 구성하는 가장 작은 단위
#### 2.1 수와 집합
- 수집합
	- 자연수: 물건을 세거나 순서를 지정하기 위해 사용하는 수의 집합
	- 정수: 자연수와 자연수의 음수 0을 포함하는 수의 집합
	- 유리수: 분모가 0이 아닌 두 정수의 비율 혹은 분수로 나타낼 수 있는 수의 집합
	- 무리수: 두 정수 비 혹은 분수로 나타낼 수 없는 수의 집합
	- 실수: 유리수와 무리수를 포함하는 수의 집합
	- 복소수: 실수와 제곱하면 -1이 되는 허수 단위 i를 조합해 a + bi(a,b는 실수) 형태로 표현하는 수의 집합
	- 사원수: 실수와 제곱하면 -1이 되는 세 허수 단위 i, j, k를 조합해 a + bi + cj + dk(a,b,c,d는 실수) 형태로 표현하는 수의 집합
- 연산과 수의 구조
	- 이항 연산의 성질
		- 닫혀 있음: 어떤 집합에서 두 원소를 사용한 이항연산의 결과가 항상 그 집합에 속하는 성질
		- 교환법칙: 두 원소의 좌우 순서를 바꿔도 결과가 동일한 성질
		- 결합법칙: 세 원소의 연산 순서를 바꿔도 결과가 동일한 성질
		- 분배법칙: 두 이항연산에 대해 a · (b + c) = a · b + a · c 와 (b + c) · a = b · a + c · a의 결과가 나오는 성질
		- 항등원(Identity): 주어진 원소와의 이항연산 결과가 언제나 주어진 원소가 되는 특별한 원소. 실수에서 덧셈의 항등원은 0이고 곱셈의 항등원은 1이다.
		- 역원(Inverse): 주어진 원소와의 이항연산 결과가 언제나 항등원이 되는 특별한 원소. 실수에서 덧셈의 역원은 반대수, 곱셈의 역원은 역수라고 부른다.
#### 2.2 함수
- 함수의 개념과 종류
	- 함수에서 왼쪽에 위치한 첫 번째 집합을 정의역(input)이라 하고, 오른쪽에 위치한 두 번째 집합을 공역(output)이라 한다.
	- 공역의 모든 원소가 정의역에 대응될 필요는 없기 때문에 정의역에 대응되는 공역의 원소만 따로 모아 부분집합을 형성할 수 있는데, 이를 치역이라고 한다.
	- 전사함수(Surjection)
		- 모든 요소가 정의역에 대응되는 함수 (공역과 치역이 동일한 함수)
	- 단사함수(Injection)
		- 일대일 함수라고도 부름
		- 정의역과 공역의 요소가 일대일로 대응되는 함수
	- 전단사함수(Bijection)
		- 정의역과 공역의 모든 요소가 빠짐없이 일대일로 대응되는 함수
- 합성함수
	- 함수의 대응관계를 확장해 다수 집합의 대응 관계로 발전시킬 수도 있다.
	- g ∘ f 또는 g(f(x))로 표시한다.
		- 먼저 실행되는 함수가 ∘기호 오른쪽에 놓인다는 점에 유의
		- g ∘ f 는 g 써클 f로 부른다.
- 항등함수와 역함수
	- 항등원, 역원과 동일한 개념이 함수에도 존재한다.
	- 정의역과 공역이 동일한 값으로 대응되는 함수를 항등함수(Identity function)이라 하고 기호 id로 나타낸다.
	- 어떤 함수와 역함수(Inverse function)를 합성한 결과는 언제나 항등함수가 된다.
- 곱집합을 활용한 좌표 평면으로의 확장
	- 곱집합(Cartesian product, or Product set)이란 두 집합의 원소를 순서쌍으로 묶은 원소의 집합을 의미한다.
	- A x B 와 같이 표현
	- 두 실수 집합의 곱집합으로 평면을 표현할 수 있고 다시 실수 집합을 곱집합으로 설정하면 3차원 공간이 된다.

### 3장 벡터: 가상 공간의 탄생
#### 3.1 데카르트 좌표계
- 데카르트 좌표계의 한 원소는 곱집합과 동일하게 순서쌍으로 표현하며 좌표(coordinate)라고 부른다. (x, y)

#### 3.2 벡터 공간과 벡터
- 스칼라와 벡터
	- 두 개 이상의 실수를 곱집합으로 묶어 형성된 집합을 공리적 집합론의 관점에서 규정한 것을 벡터 공간(Vector space)이라고 하며, 벡터 공간의 원소를 벡터(Vector)라고 한다.
	- 좌푯값으로 사용하는 x와 y를 실수로 규정하기보다는 체의 구조를 지니는 집합, 즉 체 집합의 원소로 규정한다. 이렇게 체의 구조를 가지는 수 집합의 원소를 스칼라(Scalar)라고 부른다.
- 벡터 공간의 연산
	- 공리적 집합론의 관점에서 정의된 벡터 공간은 두 가지 기본 연산이 존재한다. 사용되는 수 a,x,y는 모두 체 집합의 원소인 스칼라다.
		- 벡터와 벡터의 덧셈(벡터의 합)
			- v1 + v2 = (x1, y1) + (x2, y2) = (x1 + x2, y1 + y2)
		- 스칼라와 벡터의 곱셈(줄여서 스칼라 곱셈이라 부름)
			- a · v = a · (x, y) = (a · x, a · y)
	- 벡터 공간의 공리
		1. 벡터의 합의 결합법칙: u + (v + w) = (u + v) + w
		2. 벡터의 합의 교환법칙: u + v = v + u
		3. 벡터의 합의 항등원: v + 0 = v
		4. 벡터의 합의 역원: v + (-v) = 0
		5. 스칼라 곱셈의 호환성: a(bv) = (ab)v
		6. 스칼라 곱셈의 항등원: 1 · v =  v
		7. 스칼라 곱셈과 벡터의 합에 대한 분배법칙: a(u + v) = au + av
		8. 스칼라 곱셈과 스칼라 덧셈에 대한 분배법칙: (a + b)v = av + bv
- 벡터의 크기와 이동
	- 벡터의 크기는 피타고라스의 정리를 이용해 구한다. |v|
	- 크기가 1인 벡터는 단위 벡터라고 한다.
	- 스칼라 곱셈의 성질을 이용해 임의의 벡터 v를 이의 크기인 |v|로 나누면 단위 벡터를 얻을 수 있다. 크기가 1인 단위 벡터로 다듬는 작업을 정규화한다고 부른다.

#### 3.3 벡터의 결합과 생성
- 선형 연산을 사용해 n개의 스칼라 a1, ..., an과 벡터 v1, ... vn을 결합해 새로운 벡터를 생성하는 수식을 선형 결합(Linear combination)이라고 한다.
	- a1v1 + a2v2 + a3v3 + ... + anvn = v'
- a1v1 + a2v2 + a3v3 + ... + anvn = 0
	- 2 · (1, 1) + (-1) · (2, 2) = (0, 0) 처럼 모든 a 값이 0이 아님에도 영벡터를 만들 수 있다면, 선형 결합에 사용된 벡터는 서로 '선형 종속의 관계'를 가진다라고 표현한다.
	- 따라서 (1, 1)과 (2, 2)의 두 벡터는 선형 종속인 관계를 갖는다.
	- 반면 영벡터가 나오기 위해서 모든 a값이 0이어야 한다면 선형 결합에 사용된 벡터들은 서로 '선형 독립의 관계'를 가진다라고 표현한다.
	- 0 · (1, 2) + 0 · (2, 1) = (0, 0) 와 같이 (1, 2)와 (2, 1) 두 벡터가 결합할 때 영벡터가 나오려면 모든 스칼라 a의 값은 0이어야 하므로, 두 벡터는 선형 독립의 관계를 갖는다.
- 선형 독립의 관계를 가지는 벡터를 선형 결합하면 벡터 공간에 속한 모든 벡터를 생성할 수 있다.
- 평면의 모든 점을 생성하기 위한 선형 결합식에는 서로 평행하지 않은 2개의 벡터가 필요하다. 두 벡터는 선형 독릭의 관계를 가져야 한다.
- 선형 독립 관계를 가지는 벡터의 집합을 기저(Basis)라고 한다.
	- 기저에 속한 원소를 기저벡터(Basis Vector)라고 한다.

### 4장 삼각함수: 회전을 위한 수학
#### 4.1 삼각함수
- 길이가 1인 원의 임의의 점은 데카르트 좌표계로 좌표를 나타내면 (cosθ, sinθ)로 표현할 수 있다.
- 이를 피타고라스 정리 a^2 + b^2 = c^2에 대입하면 cos^2θ + sin^2θ = 1 이라는 공식을 얻을 수 있다. 이는 반지름 길이와 무관하게 동일하게 성립한다.
- 삼각함수의 성질
	1. sin함수와 cos함수는 항상 -1 에서 1 사이를 일정하게 반복하는 패턴을 띤다.
	2. sin함수와 cos함수의 값은 360° 주기로 반복된다.
	3. y축을 기준으로 좌우를 접어 포갰을 때 cos 함수 그래프는 데칼코마니처럼 좌우 대칭인 반면, sin 함수 그래프는 상하가 반전된 원점 대칭의 형태를 띤다. cos함수와 같이 좌우 대칭의 성질을 가진 함수를 짝함수(Even function) 또는 우함수라고 부르며, sin함수와 같이 원점 대칭의 성질을 가진 함수를 홀함수(Odd function) 또는 기함수라고 부른다.
		- sin함수와 cos함수가 지니는 홀함수와 짝함수의 성질은 다음과 같은 식으로 정리할 수 있다.
		- cos(-θ) = cos(θ)
		- sin(-θ) = -sin(θ)
	- tan 함수
		- sinθ / cosθ
		- cosθ가 0이되는 90°, 270°, -90°, -270°에서는 값이 존재하지 않는다.
		- 홀함수의 성질을 가진다.
- 호도법(Radian)
	- 벡터의 경우 크기를 비교하기 용이하도록 크기 1의 단위 벡터를 정의한 것처럼, 각을 측정할 때도 단위량 1을 기반으로 상대적인 크기를 측정할 수 있도록 체계를 만들면 합리적일 것이다.
	- 그래서 실무 계산에서 삼각함수를 응용할 때에는 각도법 대신 호의 길이를 기준으로 각을 측정하는 방법을 사용한다. 이를 호도법(Radian)이라 한다.
	- 호도법은 호의 길이가 1이 되는 부채꼴의 각을 기준으로 각을 측정한다.
	- 180°에 해당하는 반지름 1인 반원의 호 길이는 π이다. 거꾸로 호의 길이가 1인 부채꼴의 중심각을 1rad(라디안)dlek. 1라디안은 각도로 환산하면 약 57.2958도이며, 무리수이다.
	- 각도법과 호보법 사이에는 다음의 대응관계가 성립한다.
		- π(rad) = 180°
		- 1° = π/180 (rad)
		- 1(rad) = (180/π)°
	- 흔히 쓰는 각도와 호도 표기
		- 각도법	호도법
		- 30°		π/6
		- 45°		π/4
		- 60°		π/3
		- 90°		π/2
		- 180°		π
		- 360°		2π

#### 4.2 삼각함수를 활용한 물체의 회전
- 좌표 (1,1)이 각 0만큼 회전한 벡터v'의 좌표는 다음곽 같이 얻을 수 있다.
	- v' = (cos0 - sin0, sin0 + cos0)
	- 따라서 임의의 벡터 (x, y)가 각 0만큼 회전된 결과 (x', y')는 다음과 같다.
	- x' = xcos0 - ysin0
	- y' = xsin0 + ycos0

#### 4.3 삼각함수의 역함수
- y = f(x) = sin(x)
- sin함수가 가진 x와 y사이의 대응 관계를 살펴보면 정의역의 여러 요소가 공역의 한 요소에 대응되는 것을 알 수 있다.
- 만일 공역의 범위를 실수 집합 전체가 아닌 [-1, 1] 구간으로 한정해 정의한다면, sin함수는 전사함수의 성질을 띤다.
- 여기서 정의역의 범위를 좁혀 정의역의 한 요소가 공역의 한 요소에 대응되도록 전단사함수를 만들어보자. 이때 정의역의 범위는 [-90°, 90°] 구간이 된다.
- 이렇게 어떤 함수를 전단사함수로 만든다면 sinx값이 주어졌을 때 거꾸로 각 x를 구할 수 있는 역함수가 존재하게 된다. 이와 같이 정의역과 공역의 범위를 제한시켜 얻은 sin함수의 역함수를 arcsin(아크사인) 함수라고 부른다.
- f^-1(x) = sin^-1(x) = arcsin(x)
- cos, tan함수에 대한 역함수 또한 arccos(아크코사인), arctan(아크탄젠트)라고 부른다.
- arctan 함수는 벡터의 각도를 구하는 데 유용하게 사용된다. 임의의 벡터를 v = (x, y)라고 할때 tan 함수값 y/x을 arctan 함수에 넣으면 해당 벡터가 x축과 이루는 사잇각을 얻어낼 수 있다.
	- 그런데 3사분면에 있는 좌표의 경우에는 분수 y/x값을 arctan에 넣을 경우 정보를 얻을 수 없다.
	- 두 값이 가지는 부호를 파악하기 위해 x와 y값을 따로 전달해야 하기 때문에, arctan 함수는 두종류가 있으며 atan2 함수가 x와 y를 따로 전달하는 함수이다.

#### 4.4 극좌표계
- 데카르트 좌표계로 회전을 구현하면 회전에 따른 x와 y의 변화를 매번 계산하는 번거로움이 발생한다.
- 회전 동작을 기반으로 설계된 좌표계를 고안해 사용한다면, 이로부터 편리하게 회전을 관리하고 구현할 수 있을 것이다. 이를 위해 고안된 좌표계가 바로 극좌표계(Polar coordinate system)다.
- 극좌표계는 원점으로부터의 거리 r과 각0의 두 요소로 구성되며 극좌표계의 좌표는 (r, 0)로 표시한다.
- 데카르트 좌표계로 표현된 벡터 (x, y)는 벡터의 크기와 arctan 함수를 사용해 다음과 같이 극좌표계 (r, 0)로 변환할 수 있다.
	- r = √(x^2 + y^2)
	- 0 = atan2(y, x)
- 반대로 극좌표계의 좌표 (r, 0)를 데카르트 좌표계 (x, y)로 변환하는 식은 삼각함수를 사용해 구할 수 있다.
	- x = r cos0
	- y = r sin0
- 극좌표계가 지니는 원형 공간의 성질은 회전에 관련된 여러 효과를 줄 때 유용하게 사용된다. 예를 들어 롤의 스킬 아이콘 쿨타임 효과는 대표적인 극좌표계의 활용 예시다.

### 5장 행렬: 가상 세계의 변환 도구
#### 5.1 선형성: 예측 가능한 비례 관계
- 수학에서는 선형성을 다음과 같은 가법성(Additivity)과 1차 동차성(Homogeneity of degree 1) 두 가지 조건을 모두 만족하는 함수의 성질로 정의한다.
- y = ax 는 선형성을 만족, y = ax + b는 선형성을 만족하지 못 한다.
- 벡터 공간의 선형 변환
	- f(v) = f(x, y) = (ax + by, cx + dy) 함수는 가법성과 1차 동차성을 만족하여 선형 함수다.
	- 벡터 공간에서 발생하는 선형 변환의 원리는 크기 변환이나 회전 변환과 관련이 있다.
	- 벡터 v의 크기를 k배 늘리는 작업: f(v) = f(x, y) = (kx, ky)
	- 벡터 v를 각 0만큼 회전시키는 작업: f(v) = f(x, y) = (cos0x - sin0y, cos0x + sin0y)

#### 5.2 행렬
- 행렬의 기본 연산
	- 행렬과 행렬의 덧셈
		- A + B = [a b] + [e f] = [a+e b+f]<br>
		&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[c d]&nbsp;&nbsp;&nbsp;[g h]&nbsp;&nbsp;&nbsp;[c+g d+h]
	- 행렬과 스칼라의 곱셈
		- k · A = k · [a b] = [k·a k·b]<br>
			&emsp;&emsp;&emsp;&emsp;&nbsp;[c d]&nbsp;&nbsp;&nbsp;[k·c k·d]
	- 행렬의 전치(Transpose of a matrix)
		- [a d]T<br>
		  [b e]&nbsp;&nbsp;=[a b c]<br>
		  [c f]&nbsp;&nbsp;&nbsp;&nbsp;[d e f]
	- 행렬과 행렬의 곱셈 (줄여서 행렬 곱)
		- [a b] · [e f] = [ae+bg af+bh]<br>
		  [c d]&nbsp;&nbsp;&nbsp;[g h]&nbsp;&nbsp;&nbsp;[ce+dg cf+dh]
		- 행렬 곱셈의 중요한 성질 중 하나는 교환법칙이 성립하지 않는다는 점이다. 순서를 바꿔 곱셈을 하면 다른 결과가 나온다.
		- 행렬은 다음과 같이 결합법칙을 만족한다. (A · B) · C = A · (B · C)
- 정방행렬의 곱셈
	- 2 X 2 정방행렬이 2차원 벡터 공간의 선형 변환에 대응된다면, 2 X 2 정방행렬 간의 곱은 2.2.2 절에서 다룬 합성함수에 대응되는 연산이다.
- 열 기준 행렬과 행 기준 행렬
	- 수학에서 행렬을 다룰 때는 벡터를 열벡터로 나타내는 열 기준 행렬 방식을 주로 사용한다.
	- 그런데 컴퓨터에서 실제로 행렬을 응용할 때는, 행 기준 행렬을 사용하는 경우도 있다. 행 기준으로 선형 변환을 수행할 때는 열 기준과 다르게 행렬과 위치를 거꾸로 뒤집어서, 다음과 같이 벡터를 앞쪽에 두어야 행렬의 곱셈이 성립된다.
		- [a b] · [x] = [ax + by]  -> [x y] · [a c] = [ax+by cx+dy]<br>
		  [c d]&nbsp;&nbsp;&nbsp;[y]&nbsp;&nbsp;&nbsp;[cx + dy]&emsp;&emsp;&emsp;&emsp;&nbsp;&nbsp;[b d]
	- 행 기준 방식을 사용하는 사례: DirectX, Unreal
	- 열 기준 방식을 사용하는 사례: 오픈 GL, Unity
	- 두 방식 모두 전치연산을 통해 서로 변환 가능하다.

#### 5.3 행렬의 설계
- 크기 변환행렬(Scale transformation matrix)
	- e1: (1,0), e2: (0,1)의 좌표를 갖는 두 표준기저벡터를 변환하는 크기 변환행렬은 다음과 같다.
		- S = [a 0]<br>
		&emsp;&nbsp;&nbsp;[0 b]
- 회전 변환행렬(Rotation transformation matrix)
	- 90° 회전 변환을 수행하는 행렬
		- R90° = Rπ/2 = [0 -1]<br>
		&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;[1 0]
	- -90° 회전 변환을 수행하는 행렬
		- R-90° = R-π/2 = [0 1]<br>
		&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;[-1 0]
	- 90° 회전의 구현
		- (x, y)의 값을 가지는 벡터v를 90°로 변환하는 작업은 행렬을 사용하지 않아도 두 값을 바꿔치는 방법으로 간단히 구현할 수 있다. 벡터 v를 시계반대 방향으로 90° 회전한 벡터 v는 두값을 바꾸고 첫 번째 요소에 음수를 부여해 얻을 수 있다.
			- v' = (-y, x)
		- 벡터 v를 시계 방향으로 90° 회전한 벡터
			- v' = (y, -x)
	- 각 0에 대한 회전 변환행렬
		- R0 = [cos0 -sin0]<br>
		&emsp;&emsp;[sin0 cos0]
- 전단 변환행렬
	- 이번에는 표준기저벡터 e1을 고정한 상태에서 표준 기저벡터 e2를 x축 방향으로 미는 변환을 생각해보자.
	- 표준기저벡터 e1은 고정되어 있기 때문에 변환된 결과는 대각선으로 밀리는 형태를 띤다.
	- 표준기저벡터 e2를 x축 방향으로 a만큼 밀어내는 전단 변환행렬은 다음과 같이 설계할 수 있다.
		- S = [1 a]<br>
		&emsp;&emsp;[0 1]

#### 5.4 역행렬
- 행렬은 함수와 마찬가지로 항등행렬(Identity matrix)와 역행렬(Inverse matrix)가 존재한다.
	- 항등행렬 I = [1 0]<br>
	&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;[0 1]
	- 역행렬 A · A^-1 = A^-1 · A = I
		- 역행렬을 시각적으로 나타낸다면 벡터 V가 선형 변환된 벡터 W를 다시 벡터 V로 되돌리는 선형 변환이라고 할 수 있다.
- 역행렬의 존재를 파악하는 행렬식
	- 어떤 함수가 역함수를 갖기 위한 조건은 전단사함수여야 함이다. 행렬도 함수이므로 두 공간의 변환이 전단사로 대응될 때만 역행렬이 존재한다.
	- 어떤 행렬이 역행렬이 존재하는 지 확인하는 수식을 행렬식이라고 한다. 기호는 det()로 표시한다.
	- A = [a b]/[c d]
	- det(A) = ad - bc
	- det(A)의 값이 0인 선형 변환은 전단사 대응이 성립하지 않아 역행렬이 존재하지 않는다.
	- 값이 0인 변환은 시각적으로 봤을 때 2차원의 평면 영역이 1차원의 직선 영역으로 압축되는 변환이다. 이렇게 차원이 줄어들어 원 공간의 정보가 소멸 되면 원래대로 되돌리는 것이 불가능해진다.
	- det의 원리: 평행사변형의 넓이를 구하는 공식. 0이 되면 못구함
- 크기 변환행렬의 역행렬
	- 크기 변환행렬 S = [a 0]/[0 b]의 역행렬 S^-1 = [1/a 0]/[0 1/b]
- 전단 변환행렬의 역행렬
	- S = [1 a]/[0 1], S^-1 = [1 -a]/[0 1]
- 회전 변환행렬의 역행렬
	- R0^-1 = R-0이다. sin함수와 cos함수는 다음과 같은 성질이 있다.
		- cos(-0) = cos(0)
		- sin(-0) = -sin(0)
	- R = [cos0 -sin0]/[sin0 cos0], R^-1 = [cos0 sin0]/[-sin0 cos0]
	- 따라서 회전행렬의 역행렬은 별도로 삼각함수를 사용하지 않아도 기존 행렬에 전치연산을 적용하는 방법으로 쉽게 구할 수 있다.
		- R^-1 = R^T

## 2부 콘텐츠 제작 기초
### 6장 아핀 공간: 움직이는 가상세계의 구축
#### 6.1 이동 변환을 위한 아핀 공간
- 이동 선형 변환은 2 x 2 정방 행렬의 곱셈으로는 구현할 수 없다. 임의의 벡터 (x, y)를 지정한 크기 (a, b)만큼 이동시키는 기능은 다음과 같이 행렬의 덧셈으로 구할 수 있다.
	- [x]/[y] + [a]/[b] = [x+a]/[y+b]
- 하지만 다음의 행렬 곱을 만족하는 정방행렬 A는 존재하지 않는다.
	- A · [x]/[y] = [x+a]/[y+b]
- 그런데 공간의 차원을 하나 더 늘린다면 이를 구현하는 것이 가능하다. 물체를 표현하는데 두 개의 차원을 사용하고, 차원 하나를 더 추가해 선형 변환을 위한 원점과의 연결고리로 활용한다면 선형 변환의 형태로 이동을 구현할 수 있다.
	- 마지막 차원의 값이 1이라는 특정 조건을 가지는 전단 변환을 활용하면 이동 기능을 행렬로 구현할 수 있다. 이를 이동 변환행렬(Translate transformation matrix)이라고 한다.
	- T = [1 0 a]/[0 1 b]/[0 0 1]
	- 주의할 점은 이동에 사용되는 벡터는 언제나 마지막 차원 값이 1이어야 한다는 것이다.
	- 크기 변환행렬과 회전 변환행렬을 3차원으로 늘린 행렬은 다음과 같다.
		- S = [a 0 0]/[0 b 0]/[0 0 1]
		- R = [cos0 -sin0 0]/[sin0 cos0 0]/[0 0 1]
		- 이렇게 한 차원을 높여 설계한 선형 변환을 아핀 변환(Affine transformation)이라고 한다.

#### 6.2 아핀 공간의 구성 요소